# πƒβ€β™‚οΈ OpenRun

## 1.μ„λΉ„μ¤ μ†κ°

> ### [π–¥ OPENRUN λ°”λ΅κ°€κΈ°](https://openrun.site)
> μ¤ν”λ°(Open Run): νΉμ • λ¬Όκ±΄μ„ κµ¬λ§¤ν•κΈ° μ„ν•΄ λ§¤μ¥μ΄ λ¬Έμ„ μ—΄κΈ°λ„ μ „μ— λ‹¬λ ¤μ™€ μ¤„μ„ μ„λ” ν„μƒμ„ μλ―Έ.
>
> κ²½μ μ  μ΄μµκ³Ό ν¬μ† κ°€μΉ(ν•μ •ν) μ†μ λ¥Ό μ„ν•μ—¬ MZμ„Έλ€λ¥Ό μ¤‘μ‹¬μΌλ΅ μ¤ν”λ° μμ”κ°€ λκ³  μμµλ‹λ‹¤. λ°±ν™”μ  λ…ν’μ„ μ‹μ‘μΌλ΅ μ›μ†μ£Ό, λ‹Ήλ‹ΉμΉν‚¨, ν¬μΌ“λ¬λΉµ λ“± ν’λ©κ³Ό μ ν†µμ±„λ„ κµ¬λ¶„μ—†μ΄ μ¶μ‹λλ” ν•μ •νμΌλ΅ μΈν•΄ μ¤ν”λ°μ€ μ΄μ  ν•λ‚μ λ¬Έν™”λ΅ μλ¦¬μ΅κ³  μμµλ‹λ‹¤.
> 
> ν•μ§€λ§ μ¤ν”λ°μ— μ‹¤ν¨ν•κ±°λ‚, λ¬Όλ¦¬μ μΈ μ‹κ°„/κ±°λ¦¬ λ“±μ λ¬Έμ λ΅ μ¤ν”λ°μ„ μ‹λ„ν•μ§€ λ»ν•λ” μ‚¬λλ“¤λ„ μ΅΄μ¬ν•©λ‹λ‹¤.
>
> β­οΈ μ €ν¬λ” μ΄λ¬ν• μ‚¬λλ“¤μ„ μ„ν•΄ μ¤ν”λ° λ€ν–‰ μ„λΉ„μ¤λ¥Ό μ κ³µν•κ³ μ ν•©λ‹λ‹¤. μ¤ν”λ° ν–‰μ‚¬ μ •λ³΄ μ κ³µκ³Ό, μƒν’ κµ¬λ§¤λ¥Ό ν¬λ§ν•λ” μ†λΉ„μμ™€ μ¤ν”λ°μ„ λ€ν–‰ν•΄μ£Όλ” μ¤ν”λ¬λ„ μ—°κ²°μ„ ν•µμ‹¬ μ»¨ν…μΈ λ΅ ν•μ—¬ μ„μ™€ κ°™μ€ λ‹μ¦λ¥Ό ν•΄κ²°ν•κ³ μ ν•©λ‹λ‹¤.

## 2.ν€μ› μ†κ°
![α„α…µα†·α„‹α…―α†«α„‰α…©α„€α…Ά-1](https://user-images.githubusercontent.com/99185757/192174460-f6fc2b03-e1bb-4904-a871-57b68585ddbe.png)
![α„α…µα†·α„‹α…―α†«α„‰α…©α„€α…Ά-2](https://user-images.githubusercontent.com/99185757/192174469-792495d1-0a95-43df-8b8b-260b12d833fa.png)

### Backend κΉ€μ§„μ„±

- λ‹΄λ‹Ή : TypeScript, NestJS, TypeORM, WebSocket, GraphQL, MySQL, Docker, GCP
- git : [https://github.com/uiop5487](https://github.com/uiop5487)

### Backend μ΅°νμΈ

- λ‹΄λ‹Ή : TypeScript, NestJS, TypeORM, Graphql, MySQL, Docker, GCP
- git : [https://github.com/Annie-Cho](https://github.com/Annie-Cho)

### Backend ν•μ •μ°

- λ‹΄λ‹Ή : TypeScript, NestJS, TypeORM, ELK, GraphQL, MySQL, Docker, GCP
- git : [https://github.com/EriicHaan12](https://github.com/EriicHaan12)

## 3.κΈ°μ  μ¤νƒ
![α„€α…µα„‰α…®α†―α„‰α…³α„α…Άα†¨](https://user-images.githubusercontent.com/99185757/192178471-ee8d61e0-2d86-4104-a075-7b37dbcb31fb.png)

## 4.Flow Chart
<img src="https://user-images.githubusercontent.com/99185757/192178557-9c3a7518-2752-4791-96a4-303ff809b93f.png" width="500">

## 5.ERD
![erd](https://user-images.githubusercontent.com/99185757/192178709-39681dee-a64a-447f-a9ba-815b4d8960c3.png)

## 6.API λ…μ„Έμ„
![α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2022-09-26 α„‹α…©α„’α…® 1 37 27](https://user-images.githubusercontent.com/99185757/192194930-b2a2d227-8218-4f4f-96c7-66f678a46a16.png)

## 7.μ„λ²„ ν΄λ”κµ¬μ΅°
```
π—‚openrun-server
β”β”€β”€ Dockerfile
β”β”€β”€ Dockerfile.dev
β”β”€β”€ Dockerfile.prod
β”β”€β”€ README.md
β”β”€β”€ README_old.md
β”β”€β”€ docker-compose.dev.yaml
β”β”€β”€ docker-compose.prod.yaml
β”β”€β”€ docker-compose.yaml
β”β”€β”€ elk
β”‚Β Β  β””β”€β”€ logstash
β”‚Β Β      β”β”€β”€ logstash.conf
β”‚Β Β      β”β”€β”€ logstash.dev.conf
β”‚Β Β      β”β”€β”€ mysql-connector-java-8.0.28.jar
β”‚Β Β      β”β”€β”€ template-board.json
β”‚Β Β      β””β”€β”€ template.json
β”β”€β”€ gcp-bucket-keyfile.json
β”β”€β”€ nest-cli.json
β”β”€β”€ package-lock.json
β”β”€β”€ package.json
β”β”€β”€ src
β”‚Β Β  β”β”€β”€ api
β”‚Β Β  β”‚Β Β  β”β”€β”€ auths
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ auths.controller.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ auths.module.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ auths.resolver.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ auths.service.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ bankAccounts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ bankAccounts.service.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ dto
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ createBankAccount.input.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ entities
β”‚Β Β  β”‚Β Β  β”‚Β Β      β””β”€β”€  bankAccount.entity.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ boards
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ boards.module.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ boards.resolver.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ boards.service.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ dto
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ createBoard.input.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ updateBoard.input.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ entities
β”‚Β Β  β”‚Β Β  β”‚Β Β      β””β”€β”€ board.entity.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ categories
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ categories.module.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ categories.resolver.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ categories.service.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ entities
β”‚Β Β  β”‚Β Β  β”‚Β Β      β””β”€β”€ category.entity.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ chat
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ chat.gateway.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ chat.module.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ chat.resolver.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ chat.service.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ entities
β”‚Β Β  β”‚Β Β  β”‚Β Β      β”β”€β”€ chatMessage.entity.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β      β””β”€β”€ chatRoom.entity.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ eventImages
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ entities
β”‚Β Β  β”‚Β Β  β”‚Β Β      β””β”€β”€ eventImage.entity.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ events
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ dto
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ createEvent.input.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ entities
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ event.entity.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ events.module.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ events.resolver.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ events.service.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ file
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ file.module.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ file.resolver.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ file.service.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ iamport
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ iamport.service.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ images
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ entities
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ image.entity.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ images.service.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ inquiries
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ dto
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ inquiry.input.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ entities
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ inquiry.entity.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ inquiries.module.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ inquiries.resolver.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ inquiries.service.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ inquiriesAnswer
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ entities
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ inquiryAnswer.entity.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ inquiriesAnswer.module.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ inquiriesAnswer.resolver.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ inquiriesAnswer.service.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ interests
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ entities
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ interests.entity.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ interests.module.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ interests.resolver.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ interests.service.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ locations
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ dto
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ createLocation.input.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ entities
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ location.entity.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ locationes.service.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ notifications
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ entities
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ notification.entity.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ notifications.module.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ notifications.resolver.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ notifications.service.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ paymentHistories
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ entities
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ paymentHistory.entity.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ paymentHistories.module.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ paymentHistories.resolver.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ paymentHistories.service.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ payments
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ entities
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ payment.entity.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ paymentByDate.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ payments.module.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ payments.resolver.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ payments.service.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ refreshes
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ refreshes.module.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ refreshes.service.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ reports
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ dto
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ report.input.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ entities
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ report.entity.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ reports.module.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ reports.resolver.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ reports.service.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ runners
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ entities
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ runner.entity.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ runners.module.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ runners.resolver.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ runners.service.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ tokens
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ entities
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ token.entity.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ tokens.module.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ tokens.resolver.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ tokens.service.ts
β”‚Β Β  β”‚Β Β  β””β”€β”€ users
β”‚Β Β  β”‚Β Β      β”β”€β”€ dto
β”‚Β Β  β”‚Β Β      β”‚Β Β  β”β”€β”€ createAdmin.input.ts
β”‚Β Β  β”‚Β Β      β”‚Β Β  β”β”€β”€ createUser.input.ts
β”‚Β Β  β”‚Β Β      β”‚Β Β  β””β”€β”€ updateUser.input.ts
β”‚Β Β  β”‚Β Β      β”β”€β”€ entities
β”‚Β Β  β”‚Β Β      β”‚Β Β  β””β”€β”€ user.entity.ts
β”‚Β Β  β”‚Β Β      β”β”€β”€ users.module.ts
β”‚Β Β  β”‚Β Β      β”β”€β”€ users.resolver.ts
β”‚Β Β  β”‚Β Β      β””β”€β”€ users.service.ts
β”‚Β Β  β”β”€β”€ app.controller.ts
β”‚Β Β  β”β”€β”€ app.module.ts
β”‚Β Β  β”β”€β”€ commons
β”‚Β Β  β”‚Β Β  β”β”€β”€ auth
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ gql-auth.guard.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ jwt-access.strategy.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ jwt-refresh.strategy.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ jwt-social-google.strategy.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β”β”€β”€ jwt-social-kakao.strategy.ts
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ jwt-social-naver.strategy.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ filter
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ http-exception.filter.ts
β”‚Β Β  β”‚Β Β  β”β”€β”€ graphql
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ schema.gql
β”‚Β Β  β”‚Β Β  β”β”€β”€ libraries
β”‚Β Β  β”‚Β Β  β”‚Β Β  β””β”€β”€ utils.ts
β”‚Β Β  β”‚Β Β  β””β”€β”€ types
β”‚Β Β  β”‚Β Β      β””β”€β”€ type.ts
β”‚Β Β  β””β”€β”€ main.ts
β”β”€β”€ tsconfig.build.json
β”β”€β”€ tsconfig.json
β””β”€β”€ yarn.lock
```

## 8.ν”„λ΅μ νΈ μ„¤μΉ λ° μ‹¤ν–‰ λ°©λ²•
>1. λ ν¬μ§€ν† λ¦¬ ν¬ν¬
>2. Git clone
>3. yarn install
>4. docker-compose build
>5. docker-compose up

## 9.env
```
DATABASE_TYPE=mysql
DATABASE_HOST=λ°μ΄ν„°λ² μ΄μ¤ ip λλ” μ΄λ¦„
DATABASE_PORT=μ§€μ •ν• ν¬νΈλ²νΈ
DATABASE_USERNAME=μ•„μ΄λ””
DATABASE_PASSWORD=λΉ„λ°€λ²νΈ
DATABASE_DATABASE=λ°μ΄ν„°λ² μ΄μ¤ μ΄λ¦„

GOOGLE_CLIENT_ID=κµ¬κΈ€ ν΄λΌμ΄μ–ΈνΈ ID
GOOGLE_CLIENT_SECRET=κµ¬κΈ€ ν΄λΌμ΄μ–ΈνΈ Secret
GOOGLE_CALLBACK_URL=κµ¬κΈ€ ν΄λΌμ΄μ–ΈνΈ Callback URL

KAKAO_CLIENT_ID=μΉ΄μΉ΄μ¤ ν΄λΌμ΄μ–ΈνΈ ID
KAKAO_CLIENT_SECRET=μΉ΄μΉ΄μ¤ ν΄λΌμ΄μ–ΈνΈ Secret
KAKAO_CALLBACK_URL=μΉ΄μΉ΄μ¤ ν΄λΌμ΄μ–ΈνΈ Callback URL

NAVER_CLIENT_ID=λ„¤μ΄λ²„ ν΄λΌμ΄μ–ΈνΈ ID
NAVER_CLIENT_SECRET=λ„¤μ΄λ²„ ν΄λΌμ΄μ–ΈνΈ Secret
NAVER_CALLBACK_URL=λ„¤μ΄λ²„ ν΄λΌμ΄μ–ΈνΈ Callback URL

REDIS_URL=Redis IP

GOOGLE_BUCKET=κµ¬κΈ€ λ²„ν‚· ID
GOOGLE_BUCKET_PROJECT_ID=κµ¬κΈ€ λ²„ν‚· Project ID
GOOGLE_BUCKET_KEY_FILENAME=κµ¬κΈ€ λ²„ν‚· ν‚¤ νμΌ

SMS_KEY=μΏ¨μ—μ¤μ— μ—μ¤ ν‚¤
SMS_SECRET=μΏ¨μ—μ¤μ— μ—μ¤ Secret
SMS_SENDER=μΏ¨μ—μ¤μ— μ—μ¤ λ°μ‹ λ²νΈ

IMP_KEY=μ•„μ„ν¬νΈ ν‚¤
IMP_SECRET=μ•„μ„ν¬νΈ Secret
```
